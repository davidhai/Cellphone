<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ×œ×•× ×¤×•×Ÿ - ×”××•××—×™× ×‘×ª×§×©×•×¨×ª</title>
    
    <!-- ×”×’×“×¨×ª Tailwind ×¢× ×ª××™×›×” ×‘××¦×‘ ×œ×™×œ×” -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#121212',
                            card: '#1e1e1e',
                            text: '#e0e0e0',
                            border: '#333333'
                        }
                    }
                }
            }
        }
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase Compat Library -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .pop-up { animation: popUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes popUp { from { opacity: 0; transform: scale(0.8) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        .pulse-custom { animation: pulseRed 1.5s infinite; }
        @keyframes pulseRed {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }
        
        /* Dark Mode Transitions */
        body, div, p, h1, h2, h3, span, button, input, select, textarea { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans dark:bg-[#121212] dark:text-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ×”×’×“×¨×•×ª Firebase ×©×œ×š ---
        const firebaseConfig = {
            apiKey: "AIzaSyAIxnlQvXqXbBs4w9F-PZPJcG8OGOzYey4",
            authDomain: "laloumphone-a38c9.firebaseapp.com",
            projectId: "laloumphone-a38c9",
            storageBucket: "laloumphone-a38c9.firebasestorage.app",
            messagingSenderId: "555557527628",
            appId: "1:555557527628:web:df2f5c2710aaa8c25d54e9"
        };

        let db;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            db = firebase.firestore();
        } catch (error) { console.error("Firebase error:", error); }

        // --- ××™×™×§×•× ×™× ---
        const Icons = {
            Zap: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>,
            Smartphone: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>,
            ShieldCheck: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>,
            Wifi: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>,
            Menu: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></svg>,
            X: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>,
            Check: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>,
            WhatsApp: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>,
            Phone: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>,
            Signal: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 20h.01"/><path d="M7 20v-4"/><path d="M12 20v-8"/><path d="M17 20V8"/><path d="M22 20V4"/></svg>,
            Moon: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>,
            Sun: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>,
            Edit: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>,
            Trash: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>,
            Plus: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>,
            Filter: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>,
            User: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>,
            Clock: ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        };

        const SmartLogo = ({ src, alt, fallbackText }) => {
            const [error, setError] = useState(false);
            if (error || !src) return <div className="w-full h-full flex items-center justify-center bg-gray-100 text-gray-500 font-bold rounded-full text-xs text-center p-1 dark:bg-gray-700 dark:text-gray-300">{fallbackText ? fallbackText.charAt(0) : 'L'}</div>;
            return <img src={src} alt={alt} className="w-full h-full object-contain" onError={() => setError(true)} />;
        };

        const initialPlans = [
            // ×”× ×ª×•× ×™× ×”××§×•×¨×™×™× ×œ×’×™×‘×•×™
             { id: 'p5g-1', category: '5G', provider: 'Partner', providerName: 'Partner Queen 5G', color: 'bg-teal-500', price: '39.9', priceDetail: '×œ×—×•×“×© (×œ-3 ×—×•×“×©×™× ×¨××©×•× ×™×)', afterPrice: '××—×•×“×© 4: 49.9 â‚ª', features: ['5000 ×“×§×•×ª / 5000 ×”×•×“×¢×•×ª', '500GB ×’×œ×™×©×”', '400 ×“×§×•×ª ×©×™×—×” ×œ×—×•×´×œ'], isHot: true },
             // ... ×©××¨ ×”×ª×•×›× ×™×•×ª × ×˜×¢× ×•×ª ××•×˜×•××˜×™×ª ××”-DB ×× ×§×™×™×, ××• ××›××Ÿ
        ];

        const defaultPopup = {
            active: true,
            title: "××‘×¦×¢×™ ×”×©×§×” ×‘×¡×œ×§×•×!",
            subtitle: "×”×˜×‘×•×ª ×‘×œ×¢×“×™×•×ª ×œ××¦×˜×¨×¤×™× ×—×“×©×™×",
            offer1Text: "××™× ×˜×¨× ×˜ ×¡×™×‘×™×",
            offer1Sub: "×œ×—×•×“×© (×œ-3 ×—×•×“×©×™×)",
            offer1Price: "39",
            offer2Text: "×˜×¨×™×¤×œ (TV + ××™× ×˜×¨× ×˜)",
            offer2Sub: "×œ×—×•×“×© (×œ-3 ×—×•×“×©×™×)",
            offer2Price: "89"
        };

        const App = () => {
            const [view, setView] = useState('home'); 
            const [activeCategory, setActiveCategory] = useState('5G');
            const [plans, setPlans] = useState([]);
            const [leads, setLeads] = useState([]);
            const [loading, setLoading] = useState(true);
            const [popupSettings, setPopupSettings] = useState(defaultPopup);
            const [selectedProvider, setSelectedProvider] = useState('all');
            
            // --- State for New Features ---
            const [darkMode, setDarkMode] = useState(false);
            const [priceFilter, setPriceFilter] = useState(200);
            const [isLeadModalOpen, setIsLeadModalOpen] = useState(false);
            const [leadForm, setLeadForm] = useState({ name: '', phone: '' });

            // Admin State
            const [password, setPassword] = useState('');
            const [isEditModalOpen, setIsEditModalOpen] = useState(false);
            const [isPopupEditOpen, setIsPopupEditOpen] = useState(false);
            const [currentPlan, setCurrentPlan] = useState(null);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [showPopup, setShowPopup] = useState(false);

            const MY_PHONE_NUMBER = "972532701278"; 
            const ANTENNA_MAP_URL = "https://public.tableau.com/views/_17116609455320/sheet1?%3Alanguage=en-US&publish=yes&%3Asid=&%3Adisplay_count=n&%3Aorigin=viz_share_link%3F%3AshowVizHome&utm_source=go.gov.il&utm_medium=referral";

            // Dark Mode Toggle
            const toggleDarkMode = () => {
                setDarkMode(!darkMode);
                if (!darkMode) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            };

            // Data Fetching
            useEffect(() => {
                if (db) {
                    // Plans
                    db.collection("plans").onSnapshot(snapshot => {
                        if (!snapshot.empty) {
                            setPlans(snapshot.docs.map(doc => doc.data()));
                        } else {
                             // Seeding logic if empty
                             initialPlans.forEach(p => db.collection("plans").doc(p.id.toString()).set(p));
                             setPlans(initialPlans);
                        }
                        setLoading(false);
                    });
                    
                    // Popup Settings
                    db.collection("settings").doc("popup").onSnapshot(doc => {
                        if (doc.exists) setPopupSettings(doc.data());
                    });

                    // Leads (Only needed for admin really, but simplified here)
                    if(view === 'admin') {
                         db.collection("leads").orderBy('date', 'desc').onSnapshot(snapshot => {
                             setLeads(snapshot.docs.map(d => ({id: d.id, ...d.data()})));
                         });
                    }

                } else {
                    setPlans(initialPlans); // Fallback
                    setLoading(false);
                }
            }, [view]);

            // Popup Timer
            useEffect(() => {
                const timer = setTimeout(() => {
                    if (view === 'home' && popupSettings.active) setShowPopup(true);
                }, 2000);
                return () => clearTimeout(timer);
            }, [view, popupSettings]);

            // Icons & Filters
             const logos = {
                Partner: 'https://upload.wikimedia.org/wikipedia/he/2/24/Partner_logo.svg',
                Cellcom: 'https://www.smartcut.co.il/wp-content/uploads/2023/05/cellcome-new-logo-2.png.webp',
                Golan: 'https://tiber.co.il/Content/Catalog/Golan.png',
                WeCom: 'https://we-com.co.il/wp-content/uploads/2023/09/Asset-2.svg',
                Pelephone: 'https://www.logo.wine/a/logo/Pelephone/Pelephone-Logo.wine.svg',
                HotMobile: 'https://www.haboreret.co.il/wp-content/uploads/2017/08/%D7%9C%D7%95%D7%92%D7%95-%D7%94%D7%95%D7%98-%D7%9E%D7%95%D7%91%D7%99%D7%99%D7%9C.png',
                Hot: 'https://www.haboreret.co.il/wp-content/uploads/2017/08/%D7%9C%D7%95%D7%92%D7%95-%D7%94%D7%95%D7%98-%D7%9E%D7%95%D7%91%D7%99%D7%99%D7%9C.png'
            };
            
             const providerFilters = [
                { id: 'all', name: '×”×›×œ', logo: null },
                { id: 'Partner', name: '×¤×¨×˜× ×¨', logo: logos.Partner },
                { id: 'Pelephone', name: '×¤×œ××¤×•×Ÿ', logo: logos.Pelephone },
                { id: 'Cellcom', name: '×¡×œ×§×•×', logo: logos.Cellcom },
                { id: 'HotMobile', name: '×”×•×˜ ××•×‘×™×™×œ', logo: logos.HotMobile },
                { id: 'Golan', name: '×’×•×œ×Ÿ ×˜×œ×§×•×', logo: logos.Golan },
                { id: 'WeCom', name: 'wecom', logo: logos.WeCom },
            ];

            // --- Lead Submit ---
            const handleLeadSubmit = async (e) => {
                e.preventDefault();
                if (db) {
                    await db.collection("leads").add({
                        ...leadForm,
                        date: new Date().toISOString(),
                        status: 'new'
                    });
                    alert("×¤× ×™×™×ª×š ×”×ª×§×‘×œ×” ×‘×”×¦×œ×—×”!");
                    setIsLeadModalOpen(false);
                    setLeadForm({ name: '', phone: '' });
                } else {
                    alert("×©×’×™××ª ×—×™×‘×•×¨");
                }
            };
            
            const handleDeleteLead = (id) => {
                if(confirm('×œ××—×•×§ ×¤× ×™×”?')) db.collection("leads").doc(id).delete();
            }

            // --- Admin Functions ---
            const handleLogin = (e) => {
                e.preventDefault();
                if (password === '4030') { setView('admin'); setPassword(''); setIsMenuOpen(false); } else { alert('×¡×™×¡××” ×©×’×•×™×”'); }
            };

            const handleSavePopup = (e) => {
                e.preventDefault();
                if(db) db.collection("settings").doc("popup").set(popupSettings).then(() => setIsPopupEditOpen(false));
            };

            const handleSavePlan = (e) => {
                e.preventDefault();
                const p = { ...currentPlan };
                if (typeof p.features === 'string') p.features = p.features.split('\n').filter(x => x);
                if(db) db.collection("plans").doc(p.id).set(p).then(() => setIsEditModalOpen(false));
            };

            const handleDeletePlan = (id) => {
                if(confirm('×œ××—×•×§?')) if(db) db.collection("plans").doc(id).delete();
            };

            // Filter Logic
            const filteredPlans = plans.filter(p => 
                p.category === activeCategory && 
                (selectedProvider === 'all' || p.provider === selectedProvider) &&
                parseFloat(p.price) <= priceFilter
            );

            if (view === 'login') return (
                <div className="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-[#121212] p-4">
                    <div className="bg-white dark:bg-[#1e1e1e] p-8 rounded-2xl shadow-xl w-full max-w-sm">
                        <h2 className="text-2xl font-bold mb-6 text-center dark:text-white">×›× ×™×¡×” ×œ×× ×”×œ×™×</h2>
                        <input type="password" value={password} onChange={e => setPassword(e.target.value)} className="w-full p-3 border rounded mb-4 dark:bg-[#2d2d2d] dark:border-[#333] dark:text-white" placeholder="×¡×™×¡××” (4030)" />
                        <button onClick={handleLogin} className="w-full bg-blue-600 text-white py-3 rounded font-bold">×›× ×™×¡×”</button>
                        <button onClick={() => setView('home')} className="w-full mt-2 text-gray-500">×—×–×¨×” ×œ××ª×¨</button>
                    </div>
                </div>
            );

            return (
                <div className={`min-h-screen font-sans transition-colors duration-300 ${darkMode ? 'dark' : ''}`}>
                    
                    {/* Lead Modal */}
                    {isLeadModalOpen && (
                        <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                            <div className="bg-white dark:bg-[#1e1e1e] rounded-2xl w-full max-w-md p-6 relative shadow-2xl">
                                <button onClick={() => setIsLeadModalOpen(false)} className="absolute top-4 left-4 text-gray-500"><Icons.X size={24}/></button>
                                <h3 className="text-2xl font-bold mb-2 text-center dark:text-white">× ×¦×™×’ ×™×—×–×•×¨ ××œ×™×š</h3>
                                <p className="text-center opacity-70 mb-6 dark:text-gray-400">×”×©××™×¨×• ×¤×¨×˜×™× ×•× ×—×–×•×¨ ×‘×”×§×“×</p>
                                <form onSubmit={handleLeadSubmit} className="space-y-4">
                                    <input required type="text" placeholder="×©× ××œ×" className="w-full p-3 rounded-xl border bg-transparent dark:border-gray-600 dark:text-white" value={leadForm.name} onChange={e => setLeadForm({...leadForm, name: e.target.value})} />
                                    <input required type="tel" placeholder="×˜×œ×¤×•×Ÿ" className="w-full p-3 rounded-xl border bg-transparent dark:border-gray-600 dark:text-white" value={leadForm.phone} onChange={e => setLeadForm({...leadForm, phone: e.target.value})} />
                                    <button type="submit" className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg">×©×œ×— ×¤×¨×˜×™×</button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Popup Edit Modal */}
                    {isPopupEditOpen && (
                        <div className="fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/60">
                            <div className="bg-white dark:bg-[#1e1e1e] rounded-2xl w-full max-w-lg p-6 relative">
                                <h3 className="text-xl font-bold mb-4 dark:text-white">× ×™×”×•×œ ××•×“×¢×” ×§×•×¤×¦×ª</h3>
                                <div className="space-y-3 dark:text-white">
                                    <label className="flex items-center gap-2"><input type="checkbox" checked={popupSettings.active} onChange={e => setPopupSettings({...popupSettings, active: e.target.checked})} className="w-5 h-5" /> ×”×¤×¢×œ ××•×“×¢×”</label>
                                    <input className="w-full border p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={popupSettings.title} onChange={e => setPopupSettings({...popupSettings, title: e.target.value})} placeholder="×›×•×ª×¨×ª" />
                                    <input className="w-full border p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={popupSettings.subtitle} onChange={e => setPopupSettings({...popupSettings, subtitle: e.target.value})} placeholder="×ª×ª ×›×•×ª×¨×ª" />
                                    <div className="grid grid-cols-2 gap-2">
                                        <input className="border p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={popupSettings.offer1Price} onChange={e => setPopupSettings({...popupSettings, offer1Price: e.target.value})} placeholder="××—×™×¨ 1" />
                                        <input className="border p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={popupSettings.offer2Price} onChange={e => setPopupSettings({...popupSettings, offer2Price: e.target.value})} placeholder="××—×™×¨ 2" />
                                    </div>
                                    <button onClick={handleSavePopup} className="w-full bg-blue-600 text-white py-2 rounded">×©××•×¨ ×•×¢×“×›×Ÿ</button>
                                    <button onClick={() => setIsPopupEditOpen(false)} className="w-full bg-gray-200 text-gray-800 py-2 rounded mt-2">×¡×’×•×¨</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Plan Edit Modal */}
                    {isEditModalOpen && (
                         <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 overflow-y-auto">
                            <div className="bg-white dark:bg-[#1e1e1e] rounded-2xl w-full max-w-lg p-6 relative my-auto">
                                <h3 className="text-xl font-bold mb-4 dark:text-white">{currentPlan.id ? '×¢×¨×™×›×”' : '×—×“×©'}</h3>
                                <form onSubmit={handleSavePlan} className="space-y-4 dark:text-white">
                                    <input required className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.providerName} onChange={e => setCurrentPlan({...currentPlan, providerName: e.target.value})} placeholder="×©×" />
                                    <div className="grid grid-cols-2 gap-4">
                                        <input required className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.price} onChange={e => setCurrentPlan({...currentPlan, price: e.target.value})} placeholder="××—×™×¨" />
                                        <select className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.provider} onChange={e => setCurrentPlan({...currentPlan, provider: e.target.value})}>{Object.keys(logos).map(k => <option key={k} value={k}>{k}</option>)}</select>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <select className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.color} onChange={e => setCurrentPlan({...currentPlan, color: e.target.value})}><option value="bg-purple-700">×¡×’×•×œ</option><option value="bg-blue-500">×›×—×•×œ</option><option value="bg-teal-500">×˜×•×¨×§×™×–</option><option value="bg-red-600">××“×•×</option><option value="bg-pink-600">×•×¨×•×“</option><option value="bg-orange-500">×›×ª×•×</option><option value="bg-gray-800">×©×—×•×¨</option></select>
                                        <select className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.category} onChange={e => setCurrentPlan({...currentPlan, category: e.target.value})}><option value="5G">5G</option><option value="4G">4G</option><option value="Kosher">×›×©×¨</option><option value="Fiber">×¡×™×‘×™×</option></select>
                                    </div>
                                    <input className="w-full border rounded p-2 dark:bg-[#2d2d2d] dark:border-gray-600" value={currentPlan.priceDetail} onChange={e => setCurrentPlan({...currentPlan, priceDetail: e.target.value})} placeholder="×¤×¨×˜×™ ××—×™×¨" />
                                    <textarea className="w-full border rounded p-2 h-24 dark:bg-[#2d2d2d] dark:border-gray-600" value={Array.isArray(currentPlan.features) ? currentPlan.features.join('\n') : currentPlan.features} onChange={e => setCurrentPlan({...currentPlan, features: e.target.value})} placeholder="×¤×™×¨×•×˜"></textarea>
                                    <label className="flex items-center gap-2"><input type="checkbox" checked={currentPlan.isHot} onChange={e => setCurrentPlan({...currentPlan, isHot: e.target.checked})} /> ××‘×¦×¢ ×—×</label>
                                    <div className="flex gap-3 mt-6"><button type="submit" className="flex-1 bg-blue-600 text-white py-2 rounded-lg">×©××•×¨</button><button type="button" onClick={() => setIsEditModalOpen(false)} className="flex-1 bg-gray-200 text-black py-2 rounded-lg">×‘×™×˜×•×œ</button></div>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Popup Ad */}
                    {showPopup && view === 'home' && popupSettings.active && (
                        <div className="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
                            <div className="absolute inset-0 bg-black/60 pointer-events-auto" onClick={() => setShowPopup(false)}></div>
                            <div className={`relative w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 pointer-events-auto pop-up ${darkMode ? 'bg-[#1e1e1e] text-white' : 'bg-white'}`}>
                                <button onClick={() => setShowPopup(false)} className="absolute top-3 left-3 p-2 bg-gray-100 text-black rounded-full"><Icons.X size={20} /></button>
                                <div className="text-center mt-2">
                                    <div className="bg-red-600 text-white text-sm font-black py-1 px-4 rounded-full mb-3 inline-block pulse-custom">ğŸ”¥ ××‘×¦×¢ ×œ×–××Ÿ ××•×’×‘×œ</div>
                                    <h3 className="text-2xl font-black mb-1">{popupSettings.title}</h3>
                                    <p className="opacity-70 text-sm mb-5">{popupSettings.subtitle}</p>
                                    <div className="flex gap-4 justify-center mb-6">
                                        <div className={`p-4 rounded-xl text-center w-1/2 ${darkMode ? 'bg-[#2d2d2d]' : 'bg-blue-50'}`}>
                                            <div className="text-2xl font-bold text-blue-600">{popupSettings.offer1Price}â‚ª</div>
                                            <div className="text-xs opacity-70">××™× ×˜×¨× ×˜ ×¡×™×‘×™×</div>
                                        </div>
                                        <div className={`p-4 rounded-xl text-center w-1/2 ${darkMode ? 'bg-[#2d2d2d]' : 'bg-purple-50'}`}>
                                            <div className="text-2xl font-bold text-purple-600">{popupSettings.offer2Price}â‚ª</div>
                                            <div className="text-xs opacity-70">×˜×¨×™×¤×œ ××•×©×œ×</div>
                                        </div>
                                    </div>
                                    <button onClick={() => { setActiveCategory('Fiber'); setShowPopup(false); }} className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold">×œ×¤×¨×˜×™× × ×•×¡×¤×™×</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- HEADER --- */}
                    <header className={`sticky top-0 z-50 backdrop-blur-md shadow-sm ${darkMode ? 'bg-[#121212]/90 border-b border-[#333]' : 'bg-white/90'}`}>
                        <div className="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-gradient-to-tr from-blue-600 to-cyan-500 rounded-full flex items-center justify-center text-white shadow-lg"><Icons.Phone size={20} /></div>
                                <div><h1 className="text-xl font-black leading-none dark:text-white">×œ×œ×•× ×¤×•×Ÿ</h1><p className="text-xs opacity-60 dark:text-gray-400">×”×›×™ ×–×•×œ. ×‘×”×ª×—×™×™×‘×•×ª.</p></div>
                            </div>
                            <div className="flex items-center gap-3">
                                <button onClick={toggleDarkMode} className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-[#2d2d2d] dark:text-white transition-colors">{darkMode ? <Icons.Sun size={20} /> : <Icons.Moon size={20} />}</button>
                                <a href={ANTENNA_MAP_URL} target="_blank" className="bg-blue-100 text-blue-600 p-2 rounded-full"><Icons.Signal size={20} /></a>
                                <div className="relative">
                                    <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="dark:text-white"><Icons.Menu size={24}/></button>
                                    {isMenuOpen && (
                                        <div className={`absolute top-10 left-0 w-48 shadow-xl rounded-xl border z-50 ${darkMode ? 'bg-[#1e1e1e] border-[#333]' : 'bg-white border-gray-100'}`}>
                                            <button onClick={() => { setView(view === 'admin' ? 'home' : 'login'); setIsMenuOpen(false); }} className="block w-full text-right px-4 py-3 hover:opacity-70 dark:text-white">{view === 'admin' ? '×™×¦×™××”' : '× ×™×”×•×œ'}</button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                        <div className="px-4 py-2 flex gap-3 overflow-x-auto scrollbar-hide">
                             {[{ id: '5G', name: '×“×•×¨ 5', icon: <Icons.Zap size={16} /> }, { id: '4G', name: '×“×•×¨ 4', icon: <Icons.Smartphone size={16} /> }, { id: 'Kosher', name: '×›×©×¨', icon: <Icons.ShieldCheck size={16} /> }, { id: 'Fiber', name: '×¡×™×‘×™×/TV', icon: <Icons.Wifi size={16} /> }].map(cat => (
                                <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${activeCategory === cat.id ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30' : 'border opacity-70 dark:border-gray-700 dark:text-white'}`}>{cat.icon}{cat.name}</button>
                             ))}
                        </div>
                    </header>
                    
                    {/* Admin Bar */}
                    {view === 'admin' && (
                        <div className="bg-red-500/10 border-b border-red-500/20 p-4">
                            <div className="max-w-6xl mx-auto flex flex-wrap gap-3 justify-between items-center">
                                <div className="font-bold text-red-500">×¢×¨×™×›×”: {activeCategory}</div>
                                <div className="flex gap-2">
                                    <button onClick={() => setIsPopupEditOpen(true)} className="bg-purple-600 text-white px-3 py-1.5 rounded-lg text-sm">×”×’×“×¨×•×ª ××•×“×¢×”</button>
                                    <button onClick={() => { setCurrentPlan({ id: Date.now().toString(), category: activeCategory, provider: 'Partner', providerName: '×—×“×©', price: '0', priceDetail: '', features: [], isHot: false }); setIsEditModalOpen(true); }} className="bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm flex items-center gap-1"><Icons.Plus size={16} /> ×”×•×¡×£</button>
                                </div>
                            </div>
                            
                            {/* Admin Leads View */}
                            <div className="max-w-6xl mx-auto mt-6">
                                <h3 className="font-bold mb-2 flex items-center gap-2 dark:text-white"><Icons.User size={18}/> ×œ×™×“×™× ×—×“×©×™×</h3>
                                <div className="grid gap-2 max-h-60 overflow-y-auto">
                                    {leads.length === 0 && <div className="text-sm opacity-50 dark:text-gray-400">××™×Ÿ ×¤× ×™×•×ª ×—×“×©×•×ª</div>}
                                    {leads.map(lead => (
                                        <div key={lead.id} className={`p-3 rounded flex justify-between items-center ${darkMode ? 'bg-[#2d2d2d]' : 'bg-white'}`}>
                                            <div>
                                                <div className="font-bold dark:text-white">{lead.name}</div>
                                                <div className="text-sm opacity-70 dark:text-gray-400"><a href={`tel:${lead.phone}`}>{lead.phone}</a> | {new Date(lead.date).toLocaleDateString()}</div>
                                            </div>
                                            <button onClick={() => handleDeleteLead(lead.id)} className="text-red-500 hover:bg-red-50 p-2 rounded"><Icons.Trash size={16}/></button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Main Content */}
                    <main className="max-w-6xl mx-auto px-4 pb-24 mt-6">
                        
                        {/* Price Filter */}
                        <div className={`mb-6 p-4 rounded-xl border flex items-center gap-4 ${darkMode ? 'bg-[#1e1e1e] border-[#333] text-white' : 'bg-white border-gray-100'}`}>
                            <div className="flex items-center gap-2 font-bold whitespace-nowrap"><Icons.Filter size={18} /> ×¡×™× ×•×Ÿ ××—×™×¨:</div>
                            <input type="range" min="0" max="200" value={priceFilter} onChange={e => setPriceFilter(Number(e.target.value))} className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600" />
                            <div className="font-bold min-w-[60px] text-left">â‚ª{priceFilter}</div>
                        </div>

                        {/* Provider Filter */}
                        {['5G', '4G', 'Kosher'].includes(activeCategory) && (
                            <div className="mb-6 overflow-x-auto pb-2 scrollbar-hide">
                                <div className="flex gap-4 min-w-max">
                                    {providerFilters.map(prov => (
                                        <button key={prov.id} onClick={() => setSelectedProvider(prov.id)} className={`flex flex-col items-center gap-2 transition-all ${selectedProvider === prov.id ? 'opacity-100 scale-110' : 'opacity-60 grayscale'}`}>
                                            <div className={`w-14 h-14 rounded-full border-2 p-2 flex items-center justify-center bg-white ${selectedProvider === prov.id ? 'border-blue-500' : 'border-transparent shadow-sm'}`}>
                                                {prov.logo ? <SmartLogo src={prov.logo} /> : <Icons.Layers size={20} />}
                                            </div>
                                            <span className="text-[10px] font-bold dark:text-gray-300">{prov.name}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                            {filteredPlans.map(plan => (
                                <div key={plan.id} className={`relative rounded-2xl overflow-hidden border shadow-sm hover:shadow-lg transition-all ${darkMode ? 'bg-[#1e1e1e] border-[#333]' : 'bg-white border-gray-100'}`}>
                                    {view === 'admin' && <button onClick={() => { setCurrentPlan(plan); setIsEditModalOpen(true); }} className="absolute inset-0 z-20 bg-black/10 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"><div className="bg-white text-black p-2 rounded-full shadow-lg"><Icons.Edit size={24}/></div></button>}
                                    {plan.isHot && <div className="absolute top-0 left-0 bg-red-600 text-white text-[10px] font-bold px-3 py-1 rounded-br-lg z-10">ğŸ”¥ ×”×›×™ × ××›×¨</div>}
                                    
                                    <div className={`p-4 text-white text-center relative overflow-hidden ${plan.color || 'bg-gray-500'}`}>
                                        <div className="absolute top-3 right-3 w-10 h-10 bg-white rounded-full p-1.5 shadow-md z-10"><SmartLogo src={logos[plan.provider]} /></div>
                                        <div className="relative z-10 mt-2">
                                            <h3 className="font-bold text-lg opacity-95">{plan.providerName}</h3>
                                            <div className="flex justify-center items-baseline gap-0.5 mt-1">
                                                <span className="text-4xl font-black">{plan.price}</span>
                                                <span className="text-lg">â‚ª</span>
                                            </div>
                                            <p className="text-xs opacity-80 mt-1 font-medium">{plan.priceDetail}</p>
                                        </div>
                                    </div>
                                    
                                    <div className="p-5 flex flex-col justify-between h-[220px]">
                                        <ul className="space-y-2.5">
                                            {plan.features.map((f, i) => (
                                                <li key={i} className="flex items-start gap-3 text-sm opacity-80 dark:text-gray-300">
                                                    <div className="mt-0.5 text-blue-500"><Icons.Check size={14} /></div>
                                                    <span className="leading-tight">{f}</span>
                                                </li>
                                            ))}
                                        </ul>
                                        <button onClick={() => { const text = `×× ×™ ××¢×•× ×™×™×Ÿ ×‘×ª×•×›× ×™×ª: ${plan.providerName} ×‘-${plan.price} ×©×—`; window.open(`https://wa.me/${MY_PHONE_NUMBER}?text=${text}`, '_blank'); }} className="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20 active:scale-95 transition-all">
                                            ×× ×™ ×¨×•×¦×” ××ª ×–×” <Icons.MessageCircle size={18} />
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </main>

                    {/* Floating Buttons */}
                    <div className="fixed bottom-6 left-6 z-40 flex flex-col gap-3">
                        <button onClick={() => setIsLeadModalOpen(true)} className="bg-white text-blue-600 p-4 rounded-full shadow-xl hover:scale-110 transition-transform border border-blue-100 relative group">
                             <Icons.User size={24} />
                             <span className="absolute left-full ml-3 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">× ×¦×™×’ ×™×—×–×•×¨ ××œ×™×š</span>
                        </button>
                        <a href={`https://wa.me/${MY_PHONE_NUMBER}`} target="_blank" className="bg-green-500 text-white p-4 rounded-full shadow-xl hover:scale-110 transition-transform animate-bounce">
                            <Icons.WhatsApp size={24} />
                        </a>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

