<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ×œ×•× ×¤×•×Ÿ - ×××©×§ ××ª×§×“×</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // ×”×’×“×¨×ª Tailwind ×œ×ª××™×›×” ×‘××¦×‘ ×œ×™×œ×” (Dark Mode)
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: {} }
        }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .pop-up { animation: popUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes popUp { from { opacity: 0; transform: scale(0.8) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .pulse-red { animation: pulseRed 1.5s infinite; }
        @keyframes pulseRed { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans transition-colors duration-300">
    <div id="error-display" style="display:none; padding:20px; background:white; color:red; border-bottom:2px solid red;"></div>
    
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            var errorDiv = document.getElementById('error-display');
            errorDiv.style.display = 'block';
            errorDiv.innerHTML += '<strong>×©×’×™××”:</strong> ' + message + '<br><small>' + source + ':' + lineno + '</small><br><br>';
        };
    </script>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyAIxnlQvXqXbBs4w9F-PZPJcG8OGOzYey4",
            authDomain: "laloumphone-a38c9.firebaseapp.com",
            projectId: "laloumphone-a38c9",
            storageBucket: "laloumphone-a38c9.firebasestorage.app",
            messagingSenderId: "555557527628",
            appId: "1:555557527628:web:df2f5c2710aaa8c25d54e9"
        };

        let db = null;
        try {
            if (firebase && !firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
            } else if (firebase && firebase.apps.length) {
                db = firebase.firestore();
            }
        } catch (error) {
            console.error("Firebase init failed:", error);
        }

        // --- ××™×™×§×•× ×™× ---
        const Zap = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>;
        const Smartphone = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>;
        const ShieldCheck = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>;
        const Wifi = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>;
        const MenuIcon = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></svg>;
        const XIcon = ({size=24}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
        const Check = ({size, strokeWidth}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>;
        const MessageCircle = ({size, className, fill}) => <svg width={size} height={size} viewBox="0 0 24 24" fill={fill || "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>;
        const PhoneCall = ({size, strokeWidth}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth || 2} strokeLinecap="round" strokeLinejoin="round"><path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>;
        const Layers = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>;
        const Clock = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>;
        const EditIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>;
        const TrashIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
        const PlusIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>;
        const MoonIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>;
        const SunIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>;
        const BotIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="10" rx="2"></rect><circle cx="12" cy="5" r="2"></circle><path d="M12 7v4"></path><line x1="8" y1="16" x2="8" y2="16"></line><line x1="16" y1="16" x2="16" y2="16"></line></svg>;
        const SendIcon = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>;

        const SmartLogo = ({ src, alt, fallbackText }) => {
            const [error, setError] = useState(false);
            if (error || !src) return <div className="w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 font-bold rounded-full text-xs text-center p-1">{fallbackText}</div>;
            return <img src={src} alt={alt} className="w-full h-full object-contain" onError={() => setError(true)} />;
        };

        // ========== ×›××Ÿ ×ª×“×‘×™×§ ××ª ×”××¢×¨×š ×”××œ× ×©×œ×š ×‘××§×•× ×”×—×œ×§×™ ×”×–×”! ==========
        const initialPlansData = [
            { id: 'p5g-1', category: '5G', provider: 'Partner', providerName: 'Partner Queen 5G', color: 'bg-teal-500', price: '39.9', priceDetail: '×œ×—×•×“×© (×œ-3 ×—×•×“×©×™× ×¨××©×•× ×™×)', afterPrice: '××—×•×“×© 4: 49.9 â‚ª', features: ['5000 ×“×§×•×ª / 5000 ×”×•×“×¢×•×ª', '500GB ×’×œ×™×©×”', '400 ×“×§×•×ª ×©×™×—×” ×œ×—×•×´×œ'], isHot: true },
            { id: '31', category: 'Fiber', provider: 'Cellcom', providerName: '×¡×œ×§×•× ×¤×™×™×‘×¨', color: 'bg-purple-700', price: '39', priceDetail: '×œ×—×•×“×© (×œ××©×š 3 ×—×•×“×©×™×)', afterPrice: '××—×™×¨ ×”××©×š 99 â‚ª', features: ['××™× ×˜×¨× ×˜ ×¡×™×‘×™× ×¢×•×¦××ª×™', '×¨××•×˜×¨ WiFi 7 ×›×œ×•×œ', '××’×“×™×œ ×˜×•×•×— ×›×œ×•×œ!', '×”×ª×§× ×” ××”×™×¨×”'], isHot: true, badge: '××‘×¦×¢ ××˜×•×¨×£' },
        ];
        // ======================================================================

        const App = () => {
            // --- States ××§×•×¨×™×™× ---
            const [plans, setPlans] = useState(initialPlansData);
            const [view, setView] = useState('home');
            const [activeCategory, setActiveCategory] = useState('5G');
            const [selectedProvider, setSelectedProvider] = useState('all');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [showPopup, setShowPopup] = useState(false);
            const [password, setPassword] = useState('');
            const [isEditModalOpen, setIsEditModalOpen] = useState(false);
            const [currentPlan, setCurrentPlan] = useState(null);

            // --- States ×—×“×©×™× ×œ×¤×™×¦'×¨×™× ×©×”×•×¡×¤× ×• ---
            const [isDarkMode, setIsDarkMode] = useState(false);
            const [maxPrice, setMaxPrice] = useState(150); // ×¡×™× ×•×Ÿ ××—×™×¨ ××™×¨×‘×™
            const [isPopupEnabled, setIsPopupEnabled] = useState(true); // ×©×œ×™×˜×” ××”× ×™×”×•×œ ×¢×œ ×”×¤×•×¤-××¤
            
            // ×¦'××˜×‘×•×˜
            const [showChat, setShowChat] = useState(false);
            const [chatMessages, setChatMessages] = useState([{role: 'bot', text: '×©×œ×•×! ×× ×™ ×”×‘×•×˜ ×©×œ ×œ×œ×•× ×¤×•×Ÿ ğŸ¤– ××™×š ××•×›×œ ×œ×¢×–×•×¨ ×œ×š ×œ××¦×•× ×—×‘×™×œ×” ××©×ª×œ××ª? (× ×¡×” ×œ×©××•×œ ×¢×œ "×¡×™×‘×™×", "×”×›×™ ×–×•×œ", ××• "×›×©×¨")'}]);
            const [chatInput, setChatInput] = useState('');
            const chatEndRef = useRef(null);

            // ×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨
            const [showContactModal, setShowContactModal] = useState(false);
            const [contactForm, setContactForm] = useState({ name: '', phone: '', message: '' });

            const MY_PHONE_NUMBER = "972532701278"; 

            // ×¢×“×›×•×Ÿ ××—×œ×§×ª dark ×‘-body ×›×©××©× ×™× ××¦×‘ ×œ×™×œ×”
            useEffect(() => {
                if (isDarkMode) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            }, [isDarkMode]);

            // ×’×œ×™×œ×” ××•×˜×•××˜×™×ª ×œ××˜×” ×‘×¦'××˜
            useEffect(() => {
                chatEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [chatMessages, showChat]);

            // ×˜×™×™××¨ ×¤×•×¤-××¤ (××•×ª× ×” ×¢×›×©×™×• ×‘××©×ª× ×” isPopupEnabled)
            useEffect(() => {
                const timer = setTimeout(() => {
                    if (view === 'home' && isPopupEnabled) setShowPopup(true);
                }, 2000);
                return () => clearTimeout(timer);
            }, [view, isPopupEnabled]);

            // ××™×¤×•×¡ ×¡×™× ×•× ×™× ×‘××¢×‘×¨ ×§×˜×’×•×¨×™×”
            useEffect(() => {
                setSelectedProvider('all');
                setMaxPrice(150);
            }, [activeCategory]);

            // ×× ×•×¢ ×—×•×§×™× ×¤×©×•×˜ ×œ×‘×•×˜ (××›×™×•×•×Ÿ ×©××™×Ÿ ×—×™×‘×•×¨ ×œ-API ×—×™×¦×•× ×™ ×‘×§×•×“ ×¦×“ ×œ×§×•×—)
            const handleChatSubmit = (e) => {
                e.preventDefault();
                if(!chatInput.trim()) return;
                
                const newMsg = {role: 'user', text: chatInput};
                setChatMessages([...chatMessages, newMsg]);
                setChatInput('');

                setTimeout(() => {
                    let botReply = '×× ×™ ×¢×“×™×™×Ÿ ×œ×•××“... ×ª×•×›×œ ×œ× ×¡×— ×§×¦×ª ××—×¨×ª? × ×¡×” ××™×œ×™× ×›××• "××™× ×˜×¨× ×˜", "×”×›×™ ×–×•×œ", "×›×©×¨" ××• "5g". ××• ×©×¤×©×•×˜ ×ª×©××™×¨ ×œ× ×• ×¤×¨×˜×™× ×‘×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨!';
                    const inputLower = newMsg.text.toLowerCase();
                    
                    if(inputLower.includes('×–×•×œ') || inputLower.includes('××—×™×¨')) {
                        botReply = '×”×ª×•×›× ×™×•×ª ×”×›×™ ×–×•×œ×•×ª ×©×œ× ×• ××ª×—×™×œ×•×ª ×¡×‘×™×‘ 25-30 ×©×§×œ×™×! ×›×“××™ ×××•×“ ×œ×‘×“×•×§ ××ª ×§×˜×’×•×¨×™×™×ª ×“×•×¨ 4 (4G) ××• ××ª ×”×—×‘×™×œ×•×ª ×”×›×©×¨×•×ª.';
                    } else if(inputLower.includes('×¡×™×‘×™×') || inputLower.includes('××™× ×˜×¨× ×˜') || inputLower.includes('×˜×¨×™×¤×œ') || inputLower.includes('tv')) {
                        botReply = '×™×© ×œ× ×• ××‘×¦×¢×™× ××˜×•×¨×¤×™× ×¢×œ ×¡×™×‘×™× ××•×¤×˜×™×™× ×•×˜×¨×™×¤×œ ××—×‘×¨×•×ª ×›××• ×¡×œ×§×•× ×•×”×•×˜. ×ª×¢×‘×•×¨ ×œ×§×˜×’×•×¨×™×™×ª "××™× ×˜×¨× ×˜ ×•-TV" ×œ××¢×œ×” ğŸ‘†';
                    } else if(inputLower.includes('×›×©×¨')) {
                        botReply = '×œ××’×–×¨ ×”×“×ª×™ ×•×”×—×¨×“×™ ×‘× ×™× ×• ×§×˜×’×•×¨×™×” ×™×™×¢×•×“×™×ª ×©×œ "×§×• ×›×©×¨" ×¢× ×—×‘×™×œ×•×ª ×“×§×•×ª ××©×ª×œ××•×ª ×‘××™×•×—×“ ××—×‘×¨×•×ª ×›××• ×’×•×œ×Ÿ, ×”×•×˜ ××•×‘×™×™×œ ×•×¡×œ×§×•×.';
                    } else if(inputLower.includes('5g') || inputLower.includes('×“×•×¨ 5')) {
                        botReply = '×¨×©×ª ×“×•×¨ 5 (5G) ××¡×¤×§×ª ××™× ×˜×¨× ×˜ ××”×™×¨ ×•×¢×•×¦××ª×™. ×™×© ×œ× ×• ××’×•×•×Ÿ ×—×‘×™×œ×•×ª ×¢× ×’×œ×™×©×” ×‘× ×¤×— ×¢×¦×•×! ×œ×—×¥ ×¢×œ ×§×˜×’×•×¨×™×™×ª "×“×•×¨ 5".';
                    }

                    setChatMessages(prev => [...prev, {role: 'bot', text: botReply}]);
                }, 1000);
            };

            const submitContactForm = (e) => {
                e.preventDefault();
                // ×›××Ÿ ×‘×¢×ª×™×“ ××¤×©×¨ ×œ×—×‘×¨ ×©××™×¨×” ×™×©×™×¨×” ×œ-Firebase
                alert(`×ª×•×“×” ${contactForm.name}! ×”×¤× ×™×™×” × ×©××¨×”. × ×™×¦×•×¨ ××™×ª×š ×§×©×¨ ×‘××¡×¤×¨ ${contactForm.phone}.`);
                setShowContactModal(false);
                setContactForm({ name: '', phone: '', message: '' });
            };

            const logos = {
                Partner: 'https://upload.wikimedia.org/wikipedia/he/2/24/Partner_logo.svg',
                Cellcom: 'https://www.smartcut.co.il/wp-content/uploads/2023/05/cellcome-new-logo-2.png.webp',
                Golan: 'https://tiber.co.il/Content/Catalog/Golan.png',
                WeCom: 'https://we-com.co.il/wp-content/uploads/2023/09/Asset-2.svg',
                Pelephone: 'https://www.logo.wine/a/logo/Pelephone/Pelephone-Logo.wine.svg',
                HotMobile: 'https://www.haboreret.co.il/wp-content/uploads/2017/08/%D7%9C%D7%95%D7%92%D7%95-%D7%94%D7%95%D7%98-%D7%9E%D7%95%D7%91%D7%99%D7%99%D7%9C.png',
                Hot: 'https://www.haboreret.co.il/wp-content/uploads/2017/08/%D7%9C%D7%95%D7%92%D7%95-%D7%94%D7%95%D7%98-%D7%9E%D7%95%D7%91%D7%99%D7%99%D7%9C.png'
            };

            const providerFilters = [
                { id: 'all', name: '×”×›×œ', logo: null },
                { id: 'Partner', name: '×¤×¨×˜× ×¨', logo: logos.Partner },
                { id: 'Pelephone', name: '×¤×œ××¤×•×Ÿ', logo: logos.Pelephone },
                { id: 'Cellcom', name: '×¡×œ×§×•×', logo: logos.Cellcom },
                { id: 'HotMobile', name: '×”×•×˜ ××•×‘×™×™×œ', logo: logos.HotMobile },
                { id: 'Golan', name: '×’×•×œ×Ÿ ×˜×œ×§×•×', logo: logos.Golan },
                { id: 'WeCom', name: 'wecom', logo: logos.WeCom },
            ];

            const categories = [
                { id: '5G', name: '×“×•×¨ 5 (5G)', icon: <Zap size={18} /> },
                { id: '4G', name: '×“×•×¨ 4 (4G)', icon: <Smartphone size={18} /> },
                { id: 'Kosher', name: '×§×• ×›×©×¨', icon: <ShieldCheck size={18} /> },
                { id: 'Fiber', name: '××™× ×˜×¨× ×˜ ×•-TV', icon: <Wifi size={18} /> },
            ];

            // ×¡×™× ×•×Ÿ ×’× ×œ×¤×™ ×§×˜×’×•×¨×™×”, ×’× ×œ×¤×™ ×¡×¤×§, ×•×’× ×œ×¤×™ ××—×™×¨ ××™×¨×‘×™!
            const filteredPlans = plans.filter(plan => {
                const planPriceNum = parseFloat(plan.price) || 0;
                return (plan.category === activeCategory) && 
                       (selectedProvider === 'all' || plan.provider === selectedProvider) &&
                       (planPriceNum <= maxPrice);
            });

            const showProviderFilter = ['5G', '4G', 'Kosher'].includes(activeCategory);

            // ... ×›××Ÿ × ×©××¨×•×ª ×¤×•× ×§×¦×™×•×ª ×”× ×™×”×•×œ (handleLogin, handleDeletePlan, handleSavePlan ×•×›×•')
            const handleLogin = (e) => { e.preventDefault(); if (password === '4030') { setView('admin'); setPassword(''); setIsMenuOpen(false); } else { alert('×¡×™×¡××” ×©×’×•×™×”'); } };
            const handleOrder = (plan) => {
                const text = `×”×™×™ ×œ×œ×•× ×¤×•×Ÿ, ×× ×™ ××¢×•× ×™×™×Ÿ ×œ×”×¦×˜×¨×£ ×œ×ª×•×›× ×™×ª:\n*${plan.providerName}*\n*××—×™×¨:* ${plan.price} â‚ª`;
                window.open(`https://wa.me/${MY_PHONE_NUMBER}?text=${encodeURIComponent(text)}`, '_blank');
            };

            if (view === 'login') return ( /* ××¡×š ×”×ª×—×‘×¨×•×ª ×œ×œ× ×©×™× ×•×™ ×¢×§×¨×•× ×™, ×”×•×ª×× ×œ-dark mode */
                <div className="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4" dir="rtl">
                    <div className="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl w-full max-w-sm">
                        <h2 className="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">×›× ×™×¡×” ×œ×× ×”×œ×™×</h2>
                        <form onSubmit={handleLogin} className="space-y-4">
                            <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full p-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 outline-none" placeholder="×”×›× ×¡ ×¡×™×¡××”" />
                            <div className="flex gap-2">
                                <button type="submit" className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-bold">×”×ª×—×‘×¨</button>
                                <button type="button" onClick={() => setView('home')} className="flex-1 bg-gray-200 dark:bg-gray-600 dark:text-white text-gray-800 py-3 rounded-lg font-bold">×‘×™×˜×•×œ</button>
                            </div>
                        </form>
                    </div>
                </div>
            );

            return (
                <div className={`min-h-screen font-sans relative ${isDarkMode ? 'dark bg-gray-900 text-gray-100' : 'bg-gray-50 text-gray-800'}`} dir="rtl">
                    
                    {/* ×”×¤×•×¤-××¤ ×”×©×™×•×•×§×™ */}
                    {showPopup && view === 'home' && (
                        <div className="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
                            <div className="absolute inset-0 bg-black/60 pointer-events-auto" onClick={() => setShowPopup(false)}></div>
                            <div className="relative w-full sm:max-w-md bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-2xl shadow-2xl p-6 pointer-events-auto pop-up overflow-hidden text-center z-10">
                                <button onClick={() => setShowPopup(false)} className="absolute top-3 left-3 p-2 bg-gray-100 dark:bg-gray-700 rounded-full z-10"><XIcon size={20} /></button>
                                <h3 className="text-2xl font-black text-gray-900 dark:text-white mb-2 mt-4">××‘×¦×¢×™ ×”×©×§×” ×‘×¡×œ×§×•×!</h3>
                                <p className="mb-4 text-gray-600 dark:text-gray-300">×”×¦×˜×¨×¤×• ×¢×›×©×™×• ×œ××™× ×˜×¨× ×˜ ×”×¡×™×‘×™× ×”××”×™×¨ ×‘××“×™× ×”.</p>
                                <button onClick={() => { setActiveCategory('Fiber'); setShowPopup(false); window.scrollTo(0, 0); }} className="w-full bg-blue-600 text-white font-bold py-3.5 rounded-xl">×œ×¤×¨×˜×™× × ×•×¡×¤×™×</button>
                            </div>
                        </div>
                    )}

                    {/* ×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨ Modal */}
                    {showContactModal && (
                        <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50">
                            <div className="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-sm p-6 relative">
                                <button onClick={() => setShowContactModal(false)} className="absolute top-3 left-3 text-gray-500"><XIcon size={20} /></button>
                                <h3 className="text-xl font-bold mb-4 dark:text-white text-center">×”×©××¨×ª ×¤×¨×˜×™×</h3>
                                <form onSubmit={submitContactForm} className="space-y-3">
                                    <input required type="text" placeholder="×©× ××œ×" className="w-full border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded p-2" value={contactForm.name} onChange={e => setContactForm({...contactForm, name: e.target.value})} />
                                    <input required type="tel" placeholder="××¡×¤×¨ ×˜×œ×¤×•×Ÿ" className="w-full border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded p-2" value={contactForm.phone} onChange={e => setContactForm({...contactForm, phone: e.target.value})} />
                                    <textarea placeholder="××™×š × ×•×›×œ ×œ×¢×–×•×¨?" className="w-full border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded p-2 h-20" value={contactForm.message} onChange={e => setContactForm({...contactForm, message: e.target.value})}></textarea>
                                    <button type="submit" className="w-full bg-blue-600 text-white py-2 rounded-lg font-bold">×©×œ×— ×¤× ×™×™×”</button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Header */}
                    <header className={`bg-white dark:bg-gray-900 shadow-sm sticky top-0 z-40 transition-colors ${view === 'admin' ? 'border-b-4 border-red-500' : ''}`}>
                        <div className="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <div className="w-11 h-11 bg-gradient-to-tr from-blue-700 to-cyan-500 rounded-full flex items-center justify-center text-white"><PhoneCall size={22} /></div>
                                <div><h1 className="text-2xl font-black leading-none text-blue-800 dark:text-blue-400">×œ×œ×•× ×¤×•×Ÿ</h1><p className="text-sm font-medium text-gray-500 dark:text-gray-400">×”×ª×§×©×•×¨×ª ×©×œ×š, ×‘××—×™×¨ ×©×œ×š</p></div>
                            </div>
                            
                            <div className="flex items-center gap-3">
                                {/* ×›×¤×ª×•×¨ ×“××¨×§ ××•×“ */}
                                <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-yellow-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                    {isDarkMode ? <SunIcon size={20} /> : <MoonIcon size={20} />}
                                </button>
                                
                                <button onClick={() => setShowContactModal(true)} className="hidden sm:block px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-bold rounded-full text-sm">×™×¦×™×¨×ª ×§×©×¨</button>
                                
                                {/* ×›×¤×ª×•×¨ ×ª×¤×¨×™×˜ ×× ×”×œ */}
                                <div className="relative">
                                    <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full"><MenuIcon /></button>
                                    {isMenuOpen && (
                                        <div className="absolute top-12 left-0 w-48 bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-50">
                                            <div className="py-1">
                                                {view === 'admin' ? (
                                                    <button onClick={() => { setView('home'); setIsMenuOpen(false); }} className="block w-full text-right px-4 py-2 text-sm text-red-600 font-bold">×™×¦×™××” ×× ×™×”×•×œ</button>
                                                ) : (
                                                    <button onClick={() => { setView('login'); setIsMenuOpen(false); }} className="block w-full text-right px-4 py-2 text-sm text-blue-600 dark:text-blue-400 font-bold">×›× ×™×¡×” ×œ×× ×”×œ×™×</button>
                                                )}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                        
                        {/* × ×™×•×•×˜ ×§×˜×’×•×¨×™×•×ª */}
                        <div className="border-t border-gray-100 dark:border-gray-800 overflow-x-auto scrollbar-hide">
                            <div className="max-w-6xl mx-auto px-4 flex gap-3 py-3 min-w-max">
                                {categories.map((cat) => (
                                    <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap ${activeCategory === cat.id ? 'bg-blue-700 text-white' : 'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300'}`}>{cat.icon}{cat.name}</button>
                                ))}
                            </div>
                        </div>
                    </header>

                    {/* ×¡×¨×’×œ × ×™×”×•×œ ××©×•×“×¨×’ */}
                    {view === 'admin' && (
                        <div className="bg-red-50 dark:bg-red-900/20 border-b border-red-200 p-4 sticky top-[120px] z-30">
                            <div className="max-w-6xl mx-auto flex flex-col sm:flex-row justify-between items-center gap-4">
                                <div className="text-red-800 dark:text-red-400 font-bold text-sm">×××©×§ × ×™×”×•×œ ×¤×¢×™×œ</div>
                                <div className="flex items-center gap-4">
                                    <label className="flex items-center gap-2 text-sm font-bold text-red-800 dark:text-red-400">
                                        <input type="checkbox" checked={isPopupEnabled} onChange={(e) => setIsPopupEnabled(e.target.checked)} className="w-4 h-4" />
                                        ×”×¤×¢×œ ×¤×•×¤-××¤ ×©×™×•×•×§×™
                                    </label>
                                    <button className="bg-red-600 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2"><PlusIcon size={16} /> ×”×•×¡×£ ×ª×•×›× ×™×ª</button>
                                </div>
                            </div>
                        </div>
                    )}

                    <main className="max-w-6xl mx-auto px-4 pb-24 mt-6">
                        
                        {/* ×¡×™× ×•×Ÿ ×¡×¤×§×™× ×•××—×™×¨ */}
                        <div className="mb-8 bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                            {showProviderFilter && (
                                <div className="overflow-x-auto pb-4 scrollbar-hide mb-4 border-b border-gray-100 dark:border-gray-700">
                                    <div className="flex gap-4 min-w-max px-1">
                                        {providerFilters.map((prov) => (
                                            <button key={prov.id} onClick={() => setSelectedProvider(prov.id)} className={`flex flex-col items-center gap-2 transition-all ${selectedProvider === prov.id ? 'opacity-100 scale-105' : 'opacity-60'}`}>
                                                <div className={`w-14 h-14 rounded-full bg-white dark:bg-gray-700 shadow flex items-center justify-center p-2 border-2 ${selectedProvider === prov.id ? 'border-blue-500' : 'border-transparent'}`}>{prov.logo ? <SmartLogo src={prov.logo} alt={prov.name} fallbackText={prov.name} /> : <Layers size={20} />}</div>
                                                <span className="text-xs font-bold dark:text-white">{prov.name}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            {/* ×¨×›×™×‘ ×¡×™× ×•×Ÿ ×”××—×™×¨ */}
                            <div className="flex flex-col sm:flex-row items-center gap-4 px-2">
                                <span className="font-bold text-sm dark:text-white min-w-[120px]">×¡×™× ×•×Ÿ ×œ×¤×™ ××—×™×¨:</span>
                                <input type="range" min="20" max="200" step="5" value={maxPrice} onChange={(e) => setMaxPrice(Number(e.target.value))} className="w-full sm:max-w-xs accent-blue-600" />
                                <span className="font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-3 py-1 rounded-lg">×¢×“ {maxPrice} â‚ª</span>
                            </div>
                        </div>

                        {/* ×ª×¦×•×’×ª ×”×ª×•×›× ×™×•×ª */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in">
                            {filteredPlans.map((plan) => (
                                <div key={plan.id} className="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200/60 dark:border-gray-700 shadow-sm hover:shadow-xl transition-all flex flex-col overflow-hidden relative">
                                    {plan.isHot && <div className="absolute top-0 left-0 bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-br-xl z-10 uppercase">ğŸ”¥ ×”×›×™ × ××›×¨</div>}
                                    <div className={`${plan.color} p-5 text-white text-center relative`}>
                                        <h3 className="text-xl font-bold opacity-95 relative z-10">{plan.providerName}</h3>
                                        <div className="flex justify-center items-baseline gap-1 mt-2 relative z-10"><span className="text-5xl font-extrabold">{plan.price}</span><span className="text-2xl">â‚ª</span></div>
                                        <p className="text-sm opacity-90 mt-1 relative z-10">{plan.priceDetail}</p>
                                    </div>
                                    <div className="p-6 flex-grow flex flex-col justify-between dark:text-gray-300">
                                        <ul className="space-y-3.5 mb-8">
                                            {plan.features.map((feature, idx) => (
                                                <li key={idx} className="flex items-start gap-3 text-sm"><div className="mt-0.5 bg-blue-100/50 dark:bg-blue-900/30 p-1 rounded-full text-blue-600 dark:text-blue-400"><Check size={14} strokeWidth={3} /></div><span className="font-medium">{feature}</span></li>
                                            ))}
                                        </ul>
                                        <button onClick={() => handleOrder(plan)} className="w-full bg-blue-700 hover:bg-green-600 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2.5 transition-all">
                                            <MessageCircle size={20} /><span className="text-lg">×× ×™ ×¨×•×¦×” ××ª ×–×”</span>
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        {filteredPlans.length === 0 && (
                            <div className="text-center py-24 text-gray-400 bg-gray-100/50 dark:bg-gray-800/50 rounded-2xl border border-dashed border-gray-200 dark:border-gray-700">
                                <p className="text-lg font-medium">×œ× × ××¦××• ×ª×•×›× ×™×•×ª ×¢×“ {maxPrice} â‚ª ×¢×‘×•×¨ ×”×¡×¤×§ ×”× ×‘×—×¨.</p>
                            </div>
                        )}
                    </main>

                    {/* ×—×œ×•×Ÿ ×”×‘×•×˜ (AI Simulator) */}
                    {showChat && (
                        <div className="fixed bottom-24 left-6 w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 flex flex-col z-50 overflow-hidden fade-in">
                            <div className="bg-gradient-to-r from-blue-700 to-cyan-600 p-3 text-white flex justify-between items-center">
                                <div className="flex items-center gap-2 font-bold"><BotIcon size={20} /> × ×¦×™×’ ×“×™×’×™×˜×œ×™</div>
                                <button onClick={() => setShowChat(false)}><XIcon size={18} /></button>
                            </div>
                            <div className="h-64 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900">
                                {chatMessages.map((msg, idx) => (
                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`max-w-[85%] p-2.5 rounded-2xl text-sm ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white dark:bg-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 rounded-bl-none shadow-sm'}`}>
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}
                                <div ref={chatEndRef} />
                            </div>
                            <form onSubmit={handleChatSubmit} className="p-3 bg-white dark:bg-gray-800 border-t dark:border-gray-700 flex gap-2">
                                <input type="text" value={chatInput} onChange={e => setChatInput(e.target.value)} placeholder="×©××œ ××•×ª×™ ××©×”×•..." className="flex-1 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-full px-4 outline-none focus:border-blue-500 text-sm" />
                                <button type="submit" className="bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition"><SendIcon size={18} /></button>
                            </form>
                        </div>
                    )}

                    {/* ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×” ×¦×¤×™× (×•×•××˜×¡××¤ ×•×‘×•×˜) */}
                    <div className="fixed bottom-6 left-6 flex flex-col gap-3 z-40">
                        <button onClick={() => setShowChat(!showChat)} className="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-xl transition-transform hover:scale-105 self-end">
                            <BotIcon size={28} />
                        </button>
                        <a href={`https://wa.me/${MY_PHONE_NUMBER}`} target="_blank" rel="noreferrer" className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-xl hover:scale-105 flex items-center gap-3 group">
                            <MessageCircle size={28} fill="white" className="animate-pulse" />
                            <span className="font-bold hidden md:inline text-lg pr-1 group-hover:pr-2 transition-all">×“×‘×¨×• ××™×ª× ×• ×‘×•×•××˜×¡××¤</span>
                        </a>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
